{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\Admin\\\\Desktop\\\\WhatsApp\\\\whatsapp-clone\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React from'react';import'./SidebarChat.css';import{useEffect,useState}from\"react\";import{Avatar}from\"@material-ui/core\";import db from\"./firebase\";import{Link}from'react-router-dom';function SidebarChat(_ref){var _messages$;var id=_ref.id,name=_ref.name,addNewChat=_ref.addNewChat;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),seed=_useState2[0],setSeed=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),messages=_useState4[0],setMessages=_useState4[1];useEffect(function(){if(id){db.collection('rooms').doc(id).collection('messages').orderBy('timestamp','desc').onSnapshot(function(snapshot){return setMessages(snapshot.docs.map(function(doc){return doc.data();}));});}},[id]);useEffect(function(){setSeed(Math.floor(Math.random()*5000));},[]);var createChat=function createChat(){var roomName=prompt('Please Enter name for chat room..');if(roomName){db.collection('rooms').add({name:roomName});}};return!addNewChat?/*#__PURE__*/React.createElement(Link,{to:\"/rooms/\".concat(id)},/*#__PURE__*/React.createElement(\"div\",{className:\"sidebarChat\"},/*#__PURE__*/React.createElement(Avatar,{src:\"https://avatars.dicebear.com/api/human/\".concat(seed,\".svg\")}),/*#__PURE__*/React.createElement(\"div\",{className:\"sidebarChat__info\"},/*#__PURE__*/React.createElement(\"h2\",null,name),/*#__PURE__*/React.createElement(\"p\",null,(_messages$=messages[0])===null||_messages$===void 0?void 0:_messages$.messages)))):/*#__PURE__*/React.createElement(\"div\",{onClick:createChat,className:\"sidebarChat\"},/*#__PURE__*/React.createElement(\"h2\",null,\"Add New Chat\"));}export default SidebarChat;","map":{"version":3,"sources":["C:/Users/Admin/Desktop/WhatsApp/whatsapp-clone/src/SidebarChat.js"],"names":["React","useEffect","useState","Avatar","db","Link","SidebarChat","id","name","addNewChat","seed","setSeed","messages","setMessages","collection","doc","orderBy","onSnapshot","snapshot","docs","map","data","Math","floor","random","createChat","roomName","prompt","add"],"mappings":"+KAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAO,mBAAP,CACA,OAASC,SAAT,CAAqBC,QAArB,KAAqC,OAArC,CACA,OAASC,MAAT,KAAuB,mBAAvB,CACA,MAAOC,CAAAA,EAAP,KAAe,YAAf,CACA,OAASC,IAAT,KAAqB,kBAArB,CAEA,QAASC,CAAAA,WAAT,MAA2C,mBAArBC,CAAAA,EAAqB,MAArBA,EAAqB,CAAlBC,IAAkB,MAAlBA,IAAkB,CAAbC,UAAa,MAAbA,UAAa,eACfP,QAAQ,CAAC,EAAD,CADO,wCAChCQ,IADgC,eAC1BC,OAD0B,8BAEPT,QAAQ,CAAC,EAAD,CAFD,yCAEhCU,QAFgC,eAEtBC,WAFsB,eAIvCZ,SAAS,CAAC,UAAM,CACZ,GAAIM,EAAJ,CAAQ,CACJH,EAAE,CAACU,UAAH,CAAc,OAAd,EAAuBC,GAAvB,CAA2BR,EAA3B,EAA+BO,UAA/B,CAA0C,UAA1C,EAAsDE,OAAtD,CAA8D,WAA9D,CAA0E,MAA1E,EAAkFC,UAAlF,CAA6F,SAAAC,QAAQ,QACjGL,CAAAA,WAAW,CAACK,QAAQ,CAACC,IAAT,CAAcC,GAAd,CAAkB,SAACL,GAAD,QAASA,CAAAA,GAAG,CAACM,IAAJ,EAAT,EAAlB,CAAD,CADsF,EAArG,EAGH,CACJ,CANQ,CAMN,CAACd,EAAD,CANM,CAAT,CAQAN,SAAS,CAAC,UAAM,CACZU,OAAO,CAACW,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,GAAc,IAAzB,CAAD,CAAP,CACH,CAFQ,CAEN,EAFM,CAAT,CAGA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAM,CACrB,GAAMC,CAAAA,QAAQ,CAAGC,MAAM,CAAC,mCAAD,CAAvB,CACA,GAAID,QAAJ,CAAc,CACVtB,EAAE,CAACU,UAAH,CAAc,OAAd,EAAuBc,GAAvB,CAA2B,CACvBpB,IAAI,CAACkB,QADkB,CAA3B,EAGH,CACJ,CAPD,CAQA,MAAO,CAACjB,UAAD,cACH,oBAAC,IAAD,EAAM,EAAE,kBAAYF,EAAZ,CAAR,eACI,2BAAK,SAAS,CAAC,aAAf,eACA,oBAAC,MAAD,EAAQ,GAAG,kDAA4CG,IAA5C,QAAX,EADA,cAEA,2BAAK,SAAS,CAAC,mBAAf,eACI,8BAAKF,IAAL,CADJ,cAEI,yCAAII,QAAQ,CAAC,CAAD,CAAZ,qCAAI,WAAaA,QAAjB,CAFJ,CAFA,CADJ,CADG,cAYC,2BAAK,OAAO,CAAIa,UAAhB,CAA4B,SAAS,CAAC,aAAtC,eACI,6CADJ,CAZR,CAgBH,CAED,cAAenB,CAAAA,WAAf","sourcesContent":["import React from 'react';\r\nimport './SidebarChat.css';\r\nimport { useEffect , useState } from \"react\";\r\nimport { Avatar } from \"@material-ui/core\";\r\nimport db from \"./firebase\";\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction SidebarChat({id,name,addNewChat}) {\r\n    const [seed, setSeed] = useState(\"\");\r\n    const [messages, setMessages] = useState(\"\");\r\n\r\n    useEffect(() => {\r\n        if (id) {\r\n            db.collection('rooms').doc(id).collection('messages').orderBy('timestamp','desc').onSnapshot(snapshot => (\r\n                setMessages(snapshot.docs.map((doc) => doc.data()))\r\n            ))\r\n        }\r\n    }, [id]);\r\n\r\n    useEffect(() => {\r\n        setSeed(Math.floor(Math.random()*5000));\r\n    }, [])\r\n    const createChat = () => {\r\n        const roomName = prompt('Please Enter name for chat room..');\r\n        if (roomName) {\r\n            db.collection('rooms').add({\r\n                name:roomName,\r\n            });\r\n        }\r\n    };\r\n    return !addNewChat ?(\r\n        <Link to={`/rooms/${id}`} >\r\n            <div className=\"sidebarChat\">\r\n            <Avatar src={`https://avatars.dicebear.com/api/human/${seed}.svg`} />\r\n            <div className=\"sidebarChat__info\">\r\n                <h2>{name}</h2>\r\n                <p>{messages[0]?.messages}</p>\r\n            </div>\r\n        </div>\r\n        </Link>\r\n        \r\n        ) : (\r\n            <div onClick = {createChat} className=\"sidebarChat\">\r\n                <h2>Add New Chat</h2>\r\n            </div>\r\n    )\r\n}\r\n\r\nexport default SidebarChat\r\n"]},"metadata":{},"sourceType":"module"}